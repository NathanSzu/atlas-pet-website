{"ast":null,"code":"var _jsxFileName = \"G:\\\\Web Coding\\\\atlas-pet-website\\\\src\\\\pages\\\\User.js\";\nimport React, { useState, useEffect, useContext } from 'react';\nimport Background from '../components/Background';\nimport \"./style.css\";\nimport jobData from \"../utils/JobListings\";\nimport JobCard from '../components/CardJob';\nimport app from '../utils/firebase';\nimport Application from '../components/Application';\nimport { AuthContext } from '../utils/AuthContext';\nimport firebase from 'firebase/app';\nimport trash from \"../utils/Assets/trash.png\";\nexport default function User() {\n  let currentPositions = [];\n  let currentPositionsBlaine = [];\n  let currentPositionsStillwater = [];\n  let applicationData = [];\n  var db = firebase.firestore(app);\n  const [apply, setApply] = useState(false);\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const [position, setPosition] = useState();\n  const [isManager, setIsManager] = useState(false);\n  const [managerLocation, setManagerLocation] = useState(\"\");\n  const [applications, setApplications] = useState([]);\n  const [fullApp, setFullApp] = useState(null);\n  const [questions, setQuestions] = useState([]);\n  const [workHistory, setWorkHistory] = useState([]); // const [editUser, setEditUser] = useState(false);\n\n  const [applicationView, setApplicationView] = useState(false);\n  const [appButton, setAppButton] = useState(\"View Applications\");\n\n  const fullApplication = e => {\n    console.log(\"Target ID: \", e.target.id);\n\n    for (let i = 0; i < applications.length; i++) {\n      if (applications[i].uid === e.target.id) {\n        let qAdd = [];\n        let hAdd = [];\n        setFullApp(applications[i]);\n        console.log(applications[i].Questions);\n\n        for (const [key, value] of Object.entries(applications[i].Questions)) {\n          qAdd.push(value);\n          console.log(`${value.question}: ${value.response}`);\n        }\n\n        setQuestions(qAdd);\n\n        for (const [key, value] of Object.entries(applications[i].Experience)) {\n          hAdd.push(value);\n        }\n\n        setWorkHistory(hAdd);\n      }\n    }\n  };\n\n  const toggleViewApplications = () => {\n    if (applicationView) {\n      setApplicationView(false);\n      setAppButton(\"View Applications\");\n    } else if (!applicationView) {\n      setApplicationView(true);\n      setAppButton(\"Hide Applications\");\n    }\n  };\n\n  useEffect(() => {\n    // Sets a user's account level after cross referencing the manager list in the database.\n    db.collection(\"managers\").get().then(querySnapshot => {\n      querySnapshot.forEach(doc => {\n        console.log(doc.data());\n        console.log(doc.data().uid);\n\n        if (doc.data().uid === currentUser.uid) {\n          setIsManager(true);\n          setManagerLocation(doc.data().location);\n        } else {}\n      });\n    }); // For loop to populate state with current job openings\n    // Read all potential jobdata\n\n    for (let i = 0; i < jobData.alljobs.length; i++) {\n      // Check to see if the job is currently hiring\n      if (jobData.alljobs[i].available === true) {\n        // Push all jobs that are hiring to currentPositions\n        currentPositions.push(jobData.alljobs[i]); // Push all jobs hiring for Blaine to currentPositionsBlaine\n\n        if (jobData.alljobs[i].location === \"Blaine\") {\n          currentPositionsBlaine.push(jobData.alljobs[i]);\n        } // Push all jobs hiring for Stillwater to currentPositionsStillwater\n        else if (jobData.alljobs[i].location === \"Stillwater\") {\n            currentPositionsStillwater.push(jobData.alljobs[i]);\n          }\n      }\n    } // console.log(currentUser)\n\n\n    setJobState({\n      all: currentPositions,\n      Blaine: currentPositionsBlaine,\n      Stillwater: currentPositionsStillwater\n    });\n    setJobs(currentPositions);\n  }, []);\n\n  const pullApplications = () => {\n    db.collection(\"applications\").get().then(querySnapshot => {\n      querySnapshot.forEach(app => {\n        console.log(app.data());\n\n        if (app.data().position.toLowerCase().toString().includes(managerLocation.toLowerCase())) {\n          applicationData.push(app.data());\n        } else if (managerLocation === \"All\") {\n          applicationData.push(app.data());\n          console.log(applicationData);\n        }\n\n        setApplications(applicationData);\n      });\n\n      if (applicationData.length === 0) {\n        setApplications([{\n          position: \"No new applications!\"\n        }]);\n      }\n    });\n  };\n\n  const [jobState, setJobState] = useState({\n    all: [],\n    Blaine: [],\n    Stillwater: []\n  });\n  const [jobs, setJobs] = useState([]);\n\n  const handleLocationChange = e => {\n    if (e.target.value === \"Blaine\") {\n      setJobs(jobState.Blaine);\n    } else if (e.target.value === \"Stillwater\") {\n      setJobs(jobState.Stillwater);\n    } else {\n      setJobs(jobState.all);\n    }\n  };\n\n  const deleteApplication = () => {\n    console.log(fullApp);\n    db.collection(\"deleted-applications\").doc(`${fullApp.uid}`).set(fullApp).then(function () {\n      db.collection(\"applications\").doc(`${fullApp.uid}`).delete().then(function () {\n        console.log(\"Document deleted!\");\n        setFullApp(null);\n        pullApplications();\n      });\n    }).catch(function (error) {\n      console.error(\"Error writing/deleting document: \", error);\n    });\n  }; // console.log(managerList)\n\n\n  return /*#__PURE__*/React.createElement(\"main\", {\n    className: \"hide-overflow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Background, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12 job-section user-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"job-section-overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12 text-center print-hide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-light btn-filter\",\n    onClick: () => app.auth().signOut(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 37\n    }\n  }, \"Sign Out\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 33\n    }\n  }, isManager ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-light btn-filter\",\n    onClick: () => {\n      toggleViewApplications();\n      pullApplications();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 50\n    }\n  }, appButton) : null), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 33\n    }\n  })))), applicationView ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row position-relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"print-hide app-list mt-0 p-3 col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"size-24 text-center app-header-border pb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 33\n    }\n  }, \"Submitted Applications\"), applications.map((app, id) => /*#__PURE__*/React.createElement(\"button\", {\n    className: \"w-100 clear-btn-style app-list-item p-3 ml-auto mr-auto app-li-border position-relative\",\n    onClick: fullApplication,\n    id: app.uid,\n    key: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"size-20\",\n    id: app.uid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 41\n    }\n  }, app.position), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"size-20 m-0\",\n    id: app.uid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 41\n    }\n  }, app.fname, \" \", app.lname)))), /*#__PURE__*/React.createElement(\"section\", {\n    className: \"col-md-7 p-3 app-list position-relative print-width\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"size-24 text-center app-header-border pb-3 print-hide\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 33\n    }\n  }, \"Details\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"position-relative\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 33\n    }\n  }, fullApp ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"position-absolute close-btn-manager print-hide button-size\",\n    onClick: () => {\n      setFullApp(null);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 45\n    }\n  }, \"X\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"position-absolute delete-btn-manager print-hide button-size\",\n    onClick: deleteApplication,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: trash,\n    alt: \"logo\",\n    className: \"trash-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 153\n    }\n  })), /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"size-20 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 45\n    }\n  }, fullApp.position), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 45\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"app-info-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 85\n    }\n  }, \"Applicant Name:\"), \" \", fullApp.fname, \" \", fullApp.lname), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"app-info-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 85\n    }\n  }, \"Date of Birth:\"), \" \", fullApp.dob), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"app-info-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 85\n    }\n  }, \"Avalable to start:\"), \" \", fullApp.start)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"app-info-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 85\n    }\n  }, \"Email:\"), \" \", fullApp.email), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"app-info-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 85\n    }\n  }, \"Phone:\"), \" \", fullApp.phone))), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-bold text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 45\n    }\n  }, \"Work History\"), workHistory.map((data, id) => /*#__PURE__*/React.createElement(\"div\", {\n    key: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"app-info-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 85\n    }\n  }, \"Title:\"), \" \", data.title), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"app-info-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 85\n    }\n  }, \"Dates:\"), \" \", data.start, \" - \", data.end), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"app-info-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 85\n    }\n  }, \"Company:\"), \" \", data.company), /*#__PURE__*/React.createElement(\"pre\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 53\n    }\n  }, data.description), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 53\n    }\n  }))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 45\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-bold text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 45\n    }\n  }, \"Application Questions\"), questions.map((question, id) => /*#__PURE__*/React.createElement(\"div\", {\n    key: id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"app-info-display\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 53\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"app-info-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 85\n    }\n  }, question.question)), /*#__PURE__*/React.createElement(\"pre\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 53\n    }\n  }, question.response)))) : null))) : null, /*#__PURE__*/React.createElement(React.Fragment, null, !applicationView ? /*#__PURE__*/React.createElement(React.Fragment, null, apply ? /*#__PURE__*/React.createElement(Application, {\n    position: position,\n    currentUser: currentUser,\n    setApply: setApply,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 42\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-12 text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-light btn-filter\",\n    onClick: handleLocationChange,\n    value: \"all\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 41\n    }\n  }, \"All Locations\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-light btn-filter\",\n    onClick: handleLocationChange,\n    value: \"Blaine\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 41\n    }\n  }, \"Blaine\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-light btn-filter\",\n    onClick: handleLocationChange,\n    value: \"Stillwater\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 41\n    }\n  }, \"Stillwater\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 41\n    }\n  }, jobs.map(job => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-3 col-md-4 col-sm-6\",\n    key: job.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 49\n    }\n  }, /*#__PURE__*/React.createElement(JobCard, {\n    job: job,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 53\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"job-overlay\",\n    onClick: e => {\n      setApply(true);\n      setPosition(e.target.id);\n    },\n    id: job.title + \": \" + job.location,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 53\n    }\n  })))))) : null))));\n}","map":{"version":3,"sources":["G:/Web Coding/atlas-pet-website/src/pages/User.js"],"names":["React","useState","useEffect","useContext","Background","jobData","JobCard","app","Application","AuthContext","firebase","trash","User","currentPositions","currentPositionsBlaine","currentPositionsStillwater","applicationData","db","firestore","apply","setApply","currentUser","position","setPosition","isManager","setIsManager","managerLocation","setManagerLocation","applications","setApplications","fullApp","setFullApp","questions","setQuestions","workHistory","setWorkHistory","applicationView","setApplicationView","appButton","setAppButton","fullApplication","e","console","log","target","id","i","length","uid","qAdd","hAdd","Questions","key","value","Object","entries","push","question","response","Experience","toggleViewApplications","collection","get","then","querySnapshot","forEach","doc","data","location","alljobs","available","setJobState","all","Blaine","Stillwater","setJobs","pullApplications","toLowerCase","toString","includes","jobState","jobs","handleLocationChange","deleteApplication","set","delete","catch","error","auth","signOut","map","fname","lname","dob","start","email","phone","title","end","company","description","job"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport Background from '../components/Background';\r\nimport \"./style.css\";\r\nimport jobData from \"../utils/JobListings\"\r\nimport JobCard from '../components/CardJob';\r\nimport app from '../utils/firebase';\r\nimport Application from '../components/Application'\r\nimport { AuthContext } from '../utils/AuthContext';\r\nimport firebase from 'firebase/app';\r\nimport trash from \"../utils/Assets/trash.png\";\r\n\r\nexport default function User() {\r\n    let currentPositions = [];\r\n    let currentPositionsBlaine = [];\r\n    let currentPositionsStillwater = [];\r\n    let applicationData = [];\r\n\r\n    var db = firebase.firestore(app)\r\n\r\n    const [apply, setApply] = useState(false);\r\n    const { currentUser } = useContext(AuthContext);\r\n    const [position, setPosition] = useState();\r\n    const [isManager, setIsManager] = useState(false);\r\n    const [managerLocation, setManagerLocation] = useState(\"\");\r\n    const [applications, setApplications] = useState([]);\r\n    const [fullApp, setFullApp] = useState(null);\r\n    const [questions, setQuestions] = useState([]);\r\n    const [workHistory, setWorkHistory] = useState([]);\r\n    // const [editUser, setEditUser] = useState(false);\r\n    const [applicationView, setApplicationView] = useState(false);\r\n    const [appButton, setAppButton] = useState(\"View Applications\")\r\n\r\n    const fullApplication = (e) => {\r\n        console.log(\"Target ID: \", e.target.id)\r\n        for (let i = 0; i < applications.length; i++) {\r\n            if (applications[i].uid === e.target.id) {\r\n                let qAdd = [];\r\n                let hAdd = [];\r\n                setFullApp(applications[i])\r\n                console.log(applications[i].Questions)\r\n                for (const [key, value] of Object.entries(applications[i].Questions)) {\r\n                    qAdd.push(value);\r\n                    console.log(`${value.question}: ${value.response}`);\r\n                }\r\n                setQuestions(qAdd)\r\n                for (const [key, value] of Object.entries(applications[i].Experience)) {\r\n                    hAdd.push(value);\r\n                }\r\n                setWorkHistory(hAdd)\r\n            }\r\n        }\r\n    }\r\n\r\n    const toggleViewApplications = () => {\r\n        if (applicationView) {\r\n            setApplicationView(false)\r\n            setAppButton(\"View Applications\")\r\n        } else if (!applicationView) {\r\n            setApplicationView(true)\r\n            setAppButton(\"Hide Applications\")\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        // Sets a user's account level after cross referencing the manager list in the database.\r\n        db.collection(\"managers\")\r\n            .get()\r\n            .then((querySnapshot) => {\r\n                querySnapshot.forEach((doc) => {\r\n                    console.log(doc.data())\r\n                    console.log(doc.data().uid)\r\n                    if (doc.data().uid === currentUser.uid) {\r\n                        setIsManager(true)\r\n                        setManagerLocation(doc.data().location)\r\n                    } else {\r\n\r\n                    }\r\n                })\r\n            })\r\n\r\n        // For loop to populate state with current job openings\r\n        // Read all potential jobdata\r\n        for (let i = 0; i < jobData.alljobs.length; i++) {\r\n            // Check to see if the job is currently hiring\r\n            if (jobData.alljobs[i].available === true) {\r\n                // Push all jobs that are hiring to currentPositions\r\n                currentPositions.push(jobData.alljobs[i])\r\n                // Push all jobs hiring for Blaine to currentPositionsBlaine\r\n                if (jobData.alljobs[i].location === \"Blaine\") {\r\n                    currentPositionsBlaine.push(jobData.alljobs[i])\r\n                }\r\n                // Push all jobs hiring for Stillwater to currentPositionsStillwater\r\n                else if (jobData.alljobs[i].location === \"Stillwater\") {\r\n                    currentPositionsStillwater.push(jobData.alljobs[i])\r\n                }\r\n            }\r\n        }\r\n\r\n        // console.log(currentUser)\r\n        setJobState({\r\n            all: currentPositions,\r\n            Blaine: currentPositionsBlaine,\r\n            Stillwater: currentPositionsStillwater\r\n        })\r\n        setJobs(currentPositions)\r\n    }, [])\r\n\r\n    const pullApplications = () => {\r\n        db.collection(\"applications\")\r\n            .get()\r\n            .then((querySnapshot) => {\r\n                querySnapshot.forEach((app) => {\r\n                    console.log(app.data())\r\n                    if (app.data().position.toLowerCase().toString().includes(managerLocation.toLowerCase())) {\r\n                        applicationData.push(app.data())\r\n                    } else if (managerLocation === \"All\") {\r\n                        applicationData.push(app.data())\r\n                        console.log(applicationData)\r\n                    }\r\n                    setApplications(applicationData)\r\n                })\r\n                if (applicationData.length === 0) {\r\n                    setApplications([{ position: \"No new applications!\" }])\r\n                }\r\n            })\r\n    }\r\n\r\n    const [jobState, setJobState] = useState({\r\n        all: [],\r\n        Blaine: [],\r\n        Stillwater: []\r\n    })\r\n\r\n    const [jobs, setJobs] = useState([])\r\n\r\n    const handleLocationChange = (e) => {\r\n        if (e.target.value === \"Blaine\") {\r\n            setJobs(jobState.Blaine)\r\n        } else if (e.target.value === \"Stillwater\") {\r\n            setJobs(jobState.Stillwater)\r\n        } else {\r\n            setJobs(jobState.all)\r\n        }\r\n    }\r\n\r\n    const deleteApplication = () => {\r\n        console.log(fullApp)\r\n        db.collection(\"deleted-applications\").doc(`${fullApp.uid}`).set(fullApp)\r\n            .then(function () {\r\n                db.collection(\"applications\").doc(`${fullApp.uid}`).delete()\r\n                    .then(function () {\r\n                        console.log(\"Document deleted!\");\r\n                        setFullApp(null);\r\n                        pullApplications();\r\n                    });\r\n            })\r\n            .catch(function (error) {\r\n                console.error(\"Error writing/deleting document: \", error);\r\n            });\r\n    }\r\n\r\n    // console.log(managerList)\r\n    return (\r\n        <main className=\"hide-overflow\">\r\n            <Background />\r\n            <div className=\"row\">\r\n                <div className=\"col-md-12 job-section user-page\">\r\n                    <div className=\"job-section-overlay\"></div>\r\n                    <div className=\"row\">\r\n                        <div className=\"col-md-12 text-center print-hide\">\r\n                            <div className=\"row top\">\r\n                                <div className=\"col-4\">\r\n                                    <button className=\"btn btn-light btn-filter\" onClick={() => app.auth().signOut()}>Sign Out</button>\r\n                                </div>\r\n                                <div className=\"col-4\">\r\n                                    {isManager ? <button className=\"btn btn-light btn-filter\" onClick={() => { toggleViewApplications(); pullApplications() }}>{appButton}</button> : null}\r\n                                </div>\r\n                                <div className=\"col-4\">\r\n                                    {/* <button className=\"btn btn-light btn-filter\" onClick={() => { if (editUser) { setEditUser(false) } else { setEditUser(true) } }} >Account</button> */}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Conditional statement to return back end user page to view submitted applications if user is on the manager list */}\r\n                    {applicationView ?\r\n                        <div className=\"row position-relative\">\r\n                            <section className=\"print-hide app-list mt-0 p-3 col-md-5\">\r\n                                <h1 className=\"size-24 text-center app-header-border pb-3\">Submitted Applications</h1>\r\n                                {applications.map((app, id) => (\r\n                                    <button className=\"w-100 clear-btn-style app-list-item p-3 ml-auto mr-auto app-li-border position-relative\" onClick={fullApplication} id={app.uid} key={id}>\r\n                                        <h2 className=\"size-20\" id={app.uid}>{app.position}</h2>\r\n                                        <p className=\"size-20 m-0\" id={app.uid}>{app.fname} {app.lname}</p>\r\n                                    </button>\r\n                                ))}\r\n                            </section>\r\n                            <section className=\"col-md-7 p-3 app-list position-relative print-width\">\r\n                                <h1 className=\"size-24 text-center app-header-border pb-3 print-hide\">Details</h1>\r\n                                <div className=\"position-relative\">\r\n                                    {fullApp ?\r\n                                        <div className=\"container\">\r\n                                            <button className=\"position-absolute close-btn-manager print-hide button-size\" onClick={() => { setFullApp(null) }}>X</button>\r\n                                            <button className=\"position-absolute delete-btn-manager print-hide button-size\" onClick={deleteApplication}><img src={trash} alt=\"logo\" className=\"trash-icon\" /></button>\r\n                                            <h2 className=\"size-20 text-center\">{fullApp.position}</h2>\r\n\r\n                                            <div className=\"row\">\r\n                                                <div className=\"col-6\">\r\n                                                    <p className=\"app-info-display\"><span className=\"app-info-bold\">Applicant Name:</span> {fullApp.fname} {fullApp.lname}</p>\r\n                                                    <p className=\"app-info-display\"><span className=\"app-info-bold\">Date of Birth:</span> {fullApp.dob}</p>\r\n                                                    <p className=\"app-info-display\"><span className=\"app-info-bold\">Avalable to start:</span> {fullApp.start}</p>\r\n                                                </div>\r\n                                                <div className=\"col-6\">\r\n                                                    <p className=\"app-info-display\"><span className=\"app-info-bold\">Email:</span> {fullApp.email}</p>\r\n                                                    <p className=\"app-info-display\"><span className=\"app-info-bold\">Phone:</span> {fullApp.phone}</p>\r\n                                                </div>\r\n                                            </div>\r\n\r\n                                            <p className=\"app-info-bold text-center\">Work History</p>\r\n                                            {workHistory.map((data, id) => (\r\n                                                <div key={id}>\r\n                                                    <p className=\"app-info-display\"><span className=\"app-info-bold\">Title:</span> {data.title}</p>\r\n                                                    <p className=\"app-info-display\"><span className=\"app-info-bold\">Dates:</span> {data.start} - {data.end}</p>\r\n                                                    <p className=\"app-info-display\"><span className=\"app-info-bold\">Company:</span> {data.company}</p>\r\n                                                    <pre className=\"app-info-display\">{data.description}</pre>\r\n                                                    <br />\r\n                                                </div>\r\n                                            ))}\r\n                                            <br />\r\n                                            <p className=\"app-info-bold text-center\">Application Questions</p>\r\n                                            {questions.map((question, id) => (\r\n                                                <div key={id}>\r\n                                                    <p className=\"app-info-display\"><span className=\"app-info-bold\">{question.question}</span></p>\r\n                                                    <pre>{question.response}</pre>\r\n                                                </div>\r\n                                            ))}\r\n\r\n\r\n                                        </div> : null}\r\n\r\n                                </div>\r\n\r\n                            </section>\r\n\r\n                        </div>\r\n                        : null}\r\n\r\n                    <>\r\n                        {/* Conditional statement to return the application form or open position search based on state changes */}\r\n                        {!applicationView ?\r\n                            <>\r\n                                {apply ? <Application position={position} currentUser={currentUser} setApply={setApply} /> :\r\n                                    <div className=\"col-md-12 text-center\">\r\n                                        <button type=\"button\" className=\"btn btn-light btn-filter\" onClick={handleLocationChange} value=\"all\">All Locations</button>\r\n                                        <button type=\"button\" className=\"btn btn-light btn-filter\" onClick={handleLocationChange} value=\"Blaine\">Blaine</button>\r\n                                        <button type=\"button\" className=\"btn btn-light btn-filter\" onClick={handleLocationChange} value=\"Stillwater\">Stillwater</button>\r\n\r\n                                        <div className=\"row\">\r\n                                            {jobs.map((job) => (\r\n                                                <div className=\"col-lg-3 col-md-4 col-sm-6\" key={job.id}>\r\n                                                    <JobCard\r\n                                                        job={job}\r\n                                                    />\r\n                                                    <div className=\"job-overlay\" onClick={(e) => { setApply(true); setPosition(e.target.id) }} id={job.title + \": \" + job.location}></div>\r\n                                                </div>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                }\r\n                            </>\r\n                            : null}\r\n\r\n                    </>\r\n\r\n\r\n                </div>\r\n            </div>\r\n        </main >\r\n    )\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}